<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineMax - Dashboard Administrativo</title>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
    <header class="header">
        <div class="header-content">
            <h1>üé¨ CineMax - Dashboard Administrativo</h1>
            <div class="header-stats">
                <div class="stat-item">
                    <span class="stat-value" id="totalSeats">50</span>
                    <span class="stat-label">Total de Cadeiras</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="occupiedSeats">0</span>
                    <span class="stat-label">Ocupadas</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="purchasedSeats">0</span>
                    <span class="stat-label">Compradas</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="availableSeats">50</span>
                    <span class="stat-label">Dispon√≠veis</span>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="dashboard-grid">
            <!-- Controle de C√≥digos -->
            <section class="panel code-management">
                <h2>üîë Gera√ß√£o de C√≥digos</h2>
                <div class="code-form">
                    <select id="seatSelect" class="seat-select">
                        <option value="">Selecione uma cadeira</option>
                    </select>
                    <button id="generateCodeBtn" class="btn btn-primary">
                        Gerar C√≥digo
                    </button>
                </div>
                
                <div id="codeResult" class="code-result" style="display: none;">
                    <div class="code-display">
                        <h3>C√≥digo Gerado:</h3>
                        <div class="code-value" id="generatedCode"></div>
                        <div class="code-info">
                            <p><strong>Cadeira:</strong> <span id="codeSeat"></span></p>
                            <p><strong>Expira em:</strong> <span id="codeExpiry"></span></p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Mapa de Assentos -->
            <section class="panel seat-map">
                <h2>üé≠ Mapa de Assentos</h2>
                <div class="cinema-container">
                    <div class="screen">TELA</div>
                    <div class="seating-area" id="adminSeatingArea">
                        <!-- Assentos ser√£o gerados dinamicamente -->
                    </div>
                </div>
            </section>

            <!-- Atividade em Tempo Real -->
            <section class="panel activity-feed">
                <h2>üìä Atividade em Tempo Real</h2>
                <div class="activity-list" id="activityList">
                    <!-- Atividades ser√£o adicionadas dinamicamente -->
                </div>
            </section>

            <!-- C√≥digos Ativos -->
            <section class="panel active-codes">
                <h2>üé´ C√≥digos Ativos</h2>
                <div class="codes-list" id="activeCodesList">
                    <!-- C√≥digos ativos ser√£o listados aqui -->
                </div>
            </section>

            <!-- Relat√≥rios -->
            <section class="panel reports">
                <h2>üìà Relat√≥rios</h2>
                <div class="report-actions">
                    <button class="btn btn-secondary" onclick="exportReport()">
                        üìÑ Exportar Relat√≥rio
                    </button>
                    <button class="btn btn-secondary" onclick="clearHistory()">
                        üóëÔ∏è Limpar Hist√≥rico
                    </button>
                    <button class="btn btn-warning" onclick="endAllSessions()">
                        üîÑ Finalizar Todas as Sess√µes
                    </button>
                </div>
                
                <div class="report-summary">
                    <h3>Resumo da Sess√£o Atual</h3>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <span class="summary-label">Taxa de Ocupa√ß√£o:</span>
                            <span class="summary-value" id="occupancyRate">0%</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">C√≥digos Usados:</span>
                            <span class="summary-value" id="usedCodes">0</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Sess√£o Iniciada:</span>
                            <span class="summary-value" id="sessionStart">--:--</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Hist√≥rico Detalhado -->
            <section class="panel history">
                <h2>üìã Hist√≥rico Detalhado</h2>
                <div class="history-controls">
                    <input type="text" id="searchHistory" placeholder="Buscar por cadeira..." class="search-input">
                    <select id="statusFilter" class="filter-select">
                        <option value="">Todos os Status</option>
                        <option value="active">Ativo</option>
                        <option value="completed">Finalizado</option>
                        <option value="expired">Expirado</option>
                    </select>
                </div>
                <div class="history-table-container">
                    <table class="history-table" id="historyTable">
                        <thead>
                            <tr>
                                <th>Cadeira</th>
                                <th>C√≥digo</th>
                                <th>Status</th>
                                <th>In√≠cio</th>
                                <th>Fim</th>
                                <th>Dura√ß√£o</th>
                                <th>IP</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                            <!-- Dados ser√£o preenchidos dinamicamente -->
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>

    <!-- Notifica√ß√µes -->
    <div id="notifications" class="notifications"></div>

    <!-- Modal de Confirma√ß√£o -->
    <div id="confirmModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3 id="modalTitle">Confirmar A√ß√£o</h3>
            <p id="modalMessage">Tem certeza que deseja continuar?</p>
            <div class="modal-actions">
                <button id="modalCancel" class="btn btn-secondary">Cancelar</button>
                <button id="modalConfirm" class="btn btn-danger">Confirmar</button>
            </div>
        </div>
    </div>

    <script src="js/dashboard.js"></script>
</body>
</html>
